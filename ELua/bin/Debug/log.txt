[source]
function values()
local i = 0
return function ()
i = i + 1
return tb[i]
end
end
local testTb = { 10, 20, 30 }
for value in values(testTb) do
print(value)
end

[extract]
function values()
local i = 0
local #7 = function ()
local #6 = i + 1
i = #6
return tb[i]
end
return #7
end
local #8 = { 10, 20, 30 }
local testTb = #8
local #9 = values(testTb)
for value in unpack(#9) do
print(value)
end
complie 79ms

[values]
0   Push       0         
1   Var        i         
2   Bind
3   Clear
4   Function   #10       
5   Var        #7        
6   Bind
7   Clear
8   Var        #7        
9   Return
10  Clear

[#10]
0   Push       1         
1   Var        i         
2   Plus
3   Var        #6        
4   Bind
5   Clear
6   Var        #6        
7   Var        i         
8   Bind
9   Clear
10  Var        i         
11  Var        tb        
12  Index
13  Return
14  Clear

[test.lua]
0   Function   values    
1   Var        values    
2   Bind
3   Clear
4   Push       30        
5   Push       20        
6   Push       10        
7   List       3         
8   Var        #8        
9   Bind
10  Clear
11  Var        #8        
12  Var        testTb    
13  Bind
14  Clear
15  Var        testTb    
16  Var        values    
17  Call       1         
18  Var        #9        
19  Bind
20  Clear
21  Var        #9        
22  Unpack
23  Var        #15       
24  Var        #14       
25  Var        #13       
26  BindN      3         
27  Label      #16:27    
28  Push       True      
29  JumpNot    #17:55    
30  Var        #15       
31  Var        #14       
32  Var        #13       
33  Call       2         
34  Unpack
35  Var        value     
36  BindN      1         
37  Clear
38  Var        value     
39  Var        #15       
40  Bind
41  Clear
42  Push       nil       
43  Var        #15       
44  Equal
45  JumpNot    #18:48    
46  Jump       #17:55    
47  Clear
48  Label      #18:48    
49  Clear
50  Var        value     
51  Var        print     
52  Call       1         
53  Clear
54  Jump       #16:27    
55  Label      #17:55    
56  Clear

[output]
10
20
30
